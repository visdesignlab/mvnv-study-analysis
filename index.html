<!DOCTYPE html>

<meta charset="utf-8">
<title>MVN Results</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<link rel="shortcut icon" href="#" />

<link rel="stylesheet" href="css/analysis.css">
<link rel="stylesheet" href="css/bulma.css">

<!-- <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>  -->

<!-- <script src="https://d3js.org/d3.v5.min.js" type="text/javascript"></script> -->
<script src="libs/d3.min.js" type="text/javascript"></script>
<!-- <script src="js/d3-fetch.v1.min.js"></script> -->

<!-- For the guided tour -->
<script src="libs/shepherd.js"></script>
<script src="js/firebaseApi.js" type="text/javascript"></script>


<body>    
</body>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<!-- <script src="https://www.gstatic.com/firebasejs/6.3.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.3.1/firebase-firestore.js"></script> -->

<script src="libs/firebase-app.js"></script>
<script src="libs/firebase-firestore.js"></script>

<script src="js/analysis.js" type="text/javascript"></script>

<!-- <script src="https://d3js.org/d3-dsv.v1.min.js"></script> -->
<!-- <script src="https://d3js.org/d3-fetch.v1.min.js"></script> -->

<script>
    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&*#]*)/gi, function (m, key, value) {
            console.log(key, value)
            vars[key] = value;
        });
        return vars;
    }

    // see whether to fetch the data from the db or from local files.
    let {fetchFlag,saveFlag,mode} = getUrlVars();
    console.log(fetchFlag,saveFlag,mode)

    fetchFlag = fetchFlag || false;
    saveFlag = saveFlag || false;
    mode = mode || 'pre-trials'

    //connect to firestore;
    fireStore.connect();

    startAnalysis(fetchFlag,saveFlag);
    // exportForVisone();
</script> 
